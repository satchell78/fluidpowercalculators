<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8"><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script><script type="text/javascript">
        function sum() {
            var stroke = document.getElementById('stroke').value;
            var force = document.getElementById('force').value;
            var psig = document.getElementById('psig').value;
            var time = document.getElementById('time').value;

            var a = (parseFloat(force) / psig)*1.25;
            var bore = Math.sqrt(parseFloat(a) / 0.7854);
            var area = Math.pow(bore, 2)*0.7854;;
            var vol = area * stroke;
            var cf = (parseInt(psig) + 14.7) / 14.7;
            var deltaP = psig * 0.1;
            var psig2 = psig - deltaP;

            if (!isNaN(area)) {
                document.getElementById('areaResult').value = area;
                document.getElementById('boreResult').value = bore;
                document.getElementById('volumeResult').value = vol;
                document.getElementById('cfResult').value = cf;
                document.getElementById('deltaPResult').value = deltaP;
                document.getElementById('psig2Result').value = psig2;
            }
        }

        function rodFunction() {
            //var rods = document.getElementById("rodSize").value;

            var rod = document.getElementById("rodType").value;
            var bv = document.getElementById('boreResult').value;

            switch (rod) {
                //the select values are 1, 2, 3 not one, two etc
                case "1":
                    $('#rodSize')
                        .find('option')
                        .remove()
                        .end();

                    if (bv < 1.5) {
                        document.getElementById('boreChartResult').value = 1.5;
                        document.getElementById('rodChartResult').value = 0.625;
                    }
                    if (bv > 1.5 && bv < 2) {
                        document.getElementById('boreChartResult').value = 2;
                        $("#rodSize").append('<option value="0"></option>');
                        $("#rodSize").append('<option value="1">One</option>');
                        $("#rodSize").append('<option value="2">Two</option>');
                    }
                    if (bv > 2 && bv < 2.5) {
                        document.getElementById('boreChartResult').value = 2.5;
                        $("#rodSize").append('<option value="0"></option>');
                        $("#rodSize").append('<option value="1">One</option>');
                        $("#rodSize").append('<option value="2">Two</option>');
                    }
                    if (bv > 2.5 && bv < 3.25) {
                        document.getElementById('boreChartResult').value = 3.25;
                        $("#rodSize").append('<option value="0"></option>');
                        $("#rodSize").append('<option value="2">One</option>');
                        $("#rodSize").append('<option value="3">Two</option>');
                    }
                    if (bv > 3.25 && bv < 4) {
                        document.getElementById('boreChartResult').value = 4;
                        $("#rodSize").append('<option value="0"></option>');
                        $("#rodSize").append('<option value="2">One</option>');
                        $("#rodSize").append('<option value="3">Two</option>');
                    }
                    if (bv > 4 && bv < 5) {
                        document.getElementById('boreChartResult').value = 5;
                        $("#rodSize").append('<option value="0"></option>');
                        $("#rodSize").append('<option value="2">One</option>');
                        $("#rodSize").append('<option value="3">Two</option>');
                    }
                    if (bv > 5 && bv < 6) {
                        document.getElementById('boreChartResult').value = 6;
                        $("#rodSize").append('<option value="0"></option>');
                        $("#rodSize").append('<option value="3">One</option>');
                        $("#rodSize").append('<option value="4">Two</option>');
                    }
                    if (bv > 6 && bv < 7) {
                        document.getElementById('boreChartResult').value = 7;
                        $("#rodSize").append('<option value="0"></option>');
                        $("#rodSize").append('<option value="3">One</option>');
                        $("#rodSize").append('<option value="4">Two</option>');
                    }
                    if (bv > 7 && bv < 8) {
                        document.getElementById('boreChartResult').value = 8;
                        $("#rodSize").append('<option value="0"></option>');
                        $("#rodSize").append('<option value="3">One</option>');
                        $("#rodSize").append('<option value="4">Two</option>');
                    }
                    if (bv > 8 && bv < 10) {
                        document.getElementById('boreChartResult').value = 10;
                        $("#rodSize").append('<option value="0"></option>');
                        $("#rodSize").append('<option value="4">One</option>');
                        $("#rodSize").append('<option value="5">Two</option>');
                    }
                    if (bv > 10 && bv < 12) {
                        document.getElementById('boreChartResult').value = 12;
                        $("#rodSize").append('<option value="0"></option>');
                        $("#rodSize").append('<option value="5">One</option>');
                        $("#rodSize").append('<option value="6">Two</option>');
                    }
                    break;

                case "2":

                    if (bv < 0.3125) {
                        document.getElementById('boreChartResult').value = 0.3125;
                        document.getElementById('rodChartResult').value = 0.125;
                    }
                    if (bv > 0.3125 && bv < 0.4375) {
                        document.getElementById('boreChartResult').value = 0.4375;
                        document.getElementById('rodChartResult').value = 0.1875;
                    }
                    if (bv > 0.4375 && bv < 0.5625) {
                        document.getElementById('boreChartResult').value = 0.5625;
                        document.getElementById('rodChartResult').value = 0.1875;
                    }
                    if (bv > 0.5625 && bv < 0.75) {
                        document.getElementById('boreChartResult').value = 0.75;
                        document.getElementById('rodChartResult').value = 0.25;
                    }
                    if (bv > 0.75 && bv < 0.875) {
                        document.getElementById('boreChartResult').value = 0.875;
                        document.getElementById('rodChartResult').value = 0.25;
                    }
                    if (bv > 0.875 && bv < 1.0625) {
                        document.getElementById('boreChartResult').value = 1.0625;
                        document.getElementById('rodChartResult').value = 0.3125;
                    }
                    if (bv > 1.0625 && bv < 1.25) {
                        document.getElementById('boreChartResult').value = 1.25;
                        document.getElementById('rodChartResult').value = 0.4375;
                    }
                    if (bv > 1.25 && bv < 1.5) {
                        document.getElementById('boreChartResult').value = 1.5;
                        document.getElementById('rodChartResult').value = 0.4375;
                    }
                    if (bv > 1.5 && bv < 1.75) {
                        document.getElementById('boreChartResult').value = 1.75;
                        document.getElementById('rodChartResult').value = 0.5;
                    }
                    if (bv > 1.75 && bv < 2) {
                        document.getElementById('boreChartResult').value = 2;
                        document.getElementById('rodChartResult').value = 0.625;
                    }
                    if (bv > 2 && bv < 2.5) {
                        document.getElementById('boreChartResult').value = 2.5;
                        document.getElementById('rodChartResult').value = 0.625;
                    }
                    if (bv > 2.5 && bv < 3) {
                        document.getElementById('boreChartResult').value = 3;
                        document.getElementById('rodChartResult').value = 0.75;
                    }
                    break;

                case "3":

                    if (bv < 0.5) {
                        document.getElementById('boreChartResult').value = 0.5;
                        document.getElementById('rodChartResult').value = 0.25;
                    }
                    if (bv > 0.5 && bv < 0.75) {
                        document.getElementById('boreChartResult').value = 0.75;
                        document.getElementById('rodChartResult').value = 0.3125;
                    }
                    if (bv > 0.75 && bv < 1.125) {
                        document.getElementById('boreChartResult').value = 1.125;
                        document.getElementById('rodChartResult').value = 0.5;
                    }
                    if (bv > 1.125 && bv < 1.625) {
                        document.getElementById('boreChartResult').value = 1.625;
                        document.getElementById('rodChartResult').value = 0.625;
                    }
                    if (bv > 1.625 && bv < 2) {
                        document.getElementById('boreChartResult').value = 2;
                        document.getElementById('rodChartResult').value = 0.75;
                    }
                    if (bv > 2 && bv < 2.5) {
                        document.getElementById('boreChartResult').value = 2.5;
                        document.getElementById('rodChartResult').value = 0.75;
                    }
                    if (bv > 2.5 && bv < 3) {
                        document.getElementById('boreChartResult').value = 3;
                        document.getElementById('rodChartResult').value = 0.75;
                    }
                    if (bv > 3 && bv < 4) {
                        document.getElementById('boreChartResult').value = 4;
                        document.getElementById('rodChartResult').value = 0.875;
                    }
                    break;
            }
        }

        function overSizeFunction() {
            var rods = document.getElementById("rodSize").value;
            var rod = document.getElementById("rodType").value;
            var bv = document.getElementById('boreResult').value;

            if (rods == 1) {
                document.getElementById('rodChartResult').value = 0.625;
            }
            if (rods == 2) {
                document.getElementById('rodChartResult').value = 1;
            }

            if (rods == 3) {
                document.getElementById('rodChartResult').value = 1.375;
            }
            if (rods == 4) {
                document.getElementById('rodChartResult').value = 1.75;
            }

            if (rods == 5) {
                document.getElementById('rodChartResult').value = 2;
            }
            if (rods == 6) {
                document.getElementById('rodChartResult').value = 1.5;
            }
        }

        function sumFinal() {
            var volume = document.getElementById('volumeResult').value;
            var cF = document.getElementById('cfResult').value;
            var time = document.getElementById('time').value;
            var deltaPV = document.getElementById('deltaPResult').value;
            var psi2 = document.getElementById('psig2Result').value;

            var scfm = (volume * cF) / (time * 28.8);
            var cv = (scfm * 1.024) / Math.sqrt(deltaPV *(parseInt(psi2) + 14.7))

                document.getElementById('scfmResult').value = scfm;
                document.getElementById('cvResult').value = cv;
            
        }
    </script>
</head>
<body>
<h2>Pneumatics Cylinder Sizing Calculator</h2>

<!--<div style="border:1px solid gray;width: 450px; height:520px">-->
    
<p><label>Stroke</label> <input id="stroke" type="text" /></p>

<p><label>Force</label> <input id="force" type="text" /></p>

<p><label>PSIG</label> <input id="psig" onkeyup="sum()" type="text" /></p>

<p><label>Tie Rod Type</label>
    <select id="rodType" onchange="rodFunction()">
        <option value="0"></option>
        <option value="1">NFPA 4-Tie Rod</option>
        <option value="2">Round Body</option>
        <option value="3">Low Profile</option>
        <!--<option value="3">Square Body</option>-->
    </select>
</p>
<p>
    <label>Rod Over Size</label> 
    <select id="rodSize" onchange="overSizeFunction()">
    </select>
</p>

<p><label>Time in Seconds</label> <input id="time" onkeyup="sumFinal()" type="text" /></p>


<!--</div>-->

<table style="width:100%">
	<tbody>
		<tr>
			<th></th>
			<th>Theoretical</th>
			<th>Actual</th>
		</tr>
		<tr>
			<td>Bore</td>
			<td><input id="boreResult" type="text" /></td>
			<td><input id="boreChartResult" type="text" /></td>
			<td>Rod</td>
			<td><input id="rodChartResult" type="text" /></td>
		</tr>
		<tr>
			<td>Area</td>
            <td></td>
			<td><input id="areaResult" type="text" /></td>
		</tr>
		<tr>
			<td>Volume</td>
            <td></td>
			<td><input id="volumeResult" type="text" /></td>
		</tr>
		<tr>
			<td>CF</td>
            <td></td>
			<td><input id="cfResult" type="text" /></td>
		</tr>
		<tr>
			<td>Delta PSIG</td>
            <td></td>
			<td><input id="deltaPResult" type="text" /></td>
		</tr>
		<tr>
			<td>PSIG 2</td>
            <td></td>
			<td><input id="psig2Result" type="text" /></td>
		</tr>
		<tr>
			<td>SCFM</td>
            <td></td>
			<td><input id="scfmResult" type="text" /></td>
		</tr>
		<tr>
			<td>Coefficient of Velocity</td>
            <td></td>
			<td><input id="cvResult" type="text" /></td>
		</tr>
	</tbody>
</table>
   </body>
</html>